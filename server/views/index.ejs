<div>  <!-- START CONTAINER -->

  <!-- Banner Section -->
  <div class="px-4 md:px-8 md:mt-6">

    <div class="md:flex md:flex-row md:justify-around md:w-full  md:py-16 md:rounded-sm md:bg-primary">

      <div class="md:flex md:flex-col md:w-1/2 md:justify-between md:h-72">

          <div class="relative mt-5 mb-10 md:order-3 md:my-0 md:mt-0 md:flex md:flex-row md:items-end md:gap-4">

            <span class="w-4 h-4 absolute top-1/2 -translate-y-1/2 translate-x-3 material-symbols-outlined text-gray-400 hover:cursor-pointer" onclick="alert('Search feature to be implemented')"> search
            </span>

            <input type="input" name="search" id="search" placeholder="Search for Book..." value="<%=data.search%>" class=" input-btn h-[2.625rem]  font-outfit font-light px-12 md:w-3/5" required >
            <!-- <svg class="w-4 h-4 absolute top-1/2 -translate-y-1/4 translate-x-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 17 14">
                    <path c stroke="#6C63FF" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 1h15M1 7h15M1 13h15"/>
            </svg> -->

        
            <button class="hidden md:block md:h-[2.625rem] md:w-1/6 md:btn-1 md:p-2 md:font-outfit md:bg-accent md:rounded-sm  md:text-white hover-animation" onclick="alert('Function to be implemented')" >Search</button>
          </div>

          <h1 class="font-bold font-outfit text-2xl text-center my-8 md:text-left md:text-5xl md:order-1 md:my-0 md:3.5/5 md:text-white">
            A Library That's Always <br class="hidden md:block"> Open
          </h1>
 
          <p class="font-light font-outfit text-md text-center my-8 md:text-left md:order-2 md:my-0 md:w-2/3 md:text-white">
            Discover endless knowledge, resources, and storiesâ€”accessible anytime, anywhere, without limits.
          </p>

      </div>

      <div class="
      bg-[url(/images/tree_swing.svg)] h-56 image-style mt-8 mb-12
      md:h-72 md:w-1/3 md:mt-0 bg-body"></div>

    </div>


  
    <!-- Trending Books -->
    <div class="my-8 border-b-1 border-bottom border-gray-300 md:my-12 md:px-0 md:pb-5">

      <div class="h-full w-full flex flex-row justify-between items-center">
        <h2 class="font-outfit font-bold text-2xl">Trending</h2>
        <a href="/bookshop" class="font-poppins font-light hover-animation"> See All <span class="font-inter">--></span>  </a>
      </div>

      <div class="h-full w-full flex flex-row gap-4 justify-between my-8 overflow-x-auto pb-5 md:justify-between md:mb-12 md:flex-1 md:items-start">

      <% if (data.books.length) { %>
          <% data.books.forEach(book => { %>
            <% if (book.is_trending) { %>
              <div class="card-showcase group">
                <div class="card-container">
                  <img class="card-img" src="<%=book.img_url%>" ></img>
                </div>
                <p class="book-title"><%=book.book_nm%></p>
                <div class="px-1 mt-4 flex flex-row justify-start">
                  <button class="nav-btn-2 w-[90%] bg-accent text-white" onclick="alert('Function to be implemented')">Borrow now</button>
                </div>
              </div>
            <%}%>
    
          <% }) %>
      <% }%>


      </div> 

    </div>
  </div>
  

  <!-- World of Books Section -->
  <div class="flex flex-col px-8 md:h-100 md:mb-30 md:mt-20">
    <div class="md:flex md:flex-row md:gap-24">

      <div class="flex flex-col gap-8 mb-8 md:w-2/3 h-full md:justify-end">
        <h1 class="font-bold font-outfit text-2xl text-center md:text-left md:text-4xl">Unlock a World of Books</h1>
        <h2 class=" font-outfit text-xl text-center md:text-left md:text-2xl">Join our online library and borrow with ease across <br> our entire library network</h2>
        <p class="font-outfit text-sm font-light text-center md:text-left md:text-base">
        As a member, you gain exclusive access to a collaborative team of librariesâ€”meaning more titles, 
        more flexibility, and zero hassle.Track your borrowed books, explore diverse collections, and enjoy 
        seamless lending from any connected branch. Your next great read could be just a click away.
        </p>
         <a href="/signup" class="hidden cta-btn md:block md:my-4 md:w-1/2">Join now</a>
      </div>

      <div class="bg-[url(/images/world_of_books_edit.png)] image-style h-56 w-full md:h-full md:w-2/3"></div>
    </div>

     <a href="/signup" class="block cta-btn my-12 md:hidden">Join now</a>
  </div>

  <!-- Genres Section -->
   <div class="my-8 w-full md:mb-40">

    <div class="h-fit w-full bg-dark_primary py-6 my-8">
      <h2 class="font-poppins font-bold tracking-wide text-white text-center md:text-2xl">Discover Books from your favorite genres</h2>
    </div>

    <div class="px-4 w-full md:flex md:flex-col md:justify-center md:px-20">

      <div class="" id="comedy-sec">

        <div class="genre-heading bg-comedy_yellow">
          <h3 class="genre-text">Comedy</h3>
          <a href="/bookshop" class="font-outfit font-light hover-animation"> See All <span class="font-inter">--></span>  </a>
        </div>

        <div class="h-full w-full flex flex-row gap-4 items-center my-8 overflow-x-auto pb-5 md:justify-between md:mb-12">
          <% if (data.books.length) { %>
            <% data.books.forEach(book => { %>
                <% if (book.categories.includes('bkcat_000005')) { %>
                    <div class="card-showcase group">
                      <div class="card-container">
                        <img class="card-img" src="<%=book.img_url%>" ></img>
                      </div>
                      <p class="book-title"><%=book.book_nm%></p>
                      <div class="px-1 mt-4 flex flex-row justify-start">
                        <button class="nav-btn-2 w-[90%] bg-accent text-white" onclick="alert('Function to be implemented')">Borrow now</button>
                      </div>

                      <!-- TODO:  IMPLEMENT RATING SYSTEM  -->
                      <!--  <div class="ratings" data-rating-id="<%=book.book_id%>" data-rating-score="<%=book.rating_score ?? 0 %>"></div> -->
                     
                    </div>
                <%}%>
            <% }) %>
          <% }%>
        </div>

      </div>


      <div class="" id="action-sec">

        <div class="genre-heading bg-action_orange">
          <h3 class="genre-text">Action & Adventure</h3>
          <a href="/bookshop" class="font-outfit font-light hover-animation"> See All <span class="font-inter">--></span>  </a>
        </div>

        <div class="h-full w-full flex flex-row gap-4 items-center my-8 overflow-x-auto pb-5 md:justify-between md:mb-12">
        
          <% if (data.books.length) { %>
            <% data.books.forEach(book => { %>
                <% if (book.categories.includes('bkcat_000003')) { %>
                    <div class="card-showcase group">
                      <div class="card-container">
                        <img class="card-img" src="<%=book.img_url%>" ></img>
                      </div>
                      <p class="book-title"><%=book.book_nm%></p>
                      <div class="px-1 mt-4 flex flex-row justify-start">
                        <button class="nav-btn-2 w-[90%] bg-accent text-white" onclick="alert('Function to be implemented')">Borrow now</button>
                      </div>
                    </div>
                <%}%>
            <% }) %>
          <% }%>
    

      </div>

      <div class="" id="fiction-sec">

        <div class="genre-heading bg-fiction">
          <h3 class="genre-text">Fiction</h3>
          <a href="/bookshop" class="font-outfit font-light hover-animation"> See All <span class="font-inter">--></span>  </a>
        </div>

        <div class="h-full w-full flex flex-row gap-4 items-center my-8 overflow-x-auto pb-5 md:justify-between md:mb-12">
        
          <% if (data.books.length) { %>
            <% data.books.forEach(book => { %>
                <% if (book.categories.includes('bkcat_000001')) { %>
                    <div class="card-showcase group">
                      <div class="card-container">
                        <img class="card-img" src="<%=book.img_url%>" ></img>
                      </div>
                      <p class="book-title"><%=book.book_nm%></p>
                      <div class="px-1 mt-4 flex flex-row justify-start">
                        <button class="nav-btn-2 w-[90%] bg-accent text-white" onclick="alert('Function to be implemented')">Borrow now</button>
                      </div>
                    </div>
                <%}%>
            <% }) %>
          <% }%>

      </div>


      <a href="/signup" class="block w-full cta-btn mb-10"> View All</a>
      
    </div>

  </div>
 
 </div> <!-- END CONTAINER -->


 <script>

  function generateRatings(){
    const min = 1; // lowest Rating
    const max = 5; // highest Rating

    rating = Math.random() * (max - min) + min;

    return rating.toFixed(2);
  }

  function renderRatings(){
    const ratingElements = Array.from(document.querySelectorAll(".ratings"));

    ratingElements.forEach(elem => {

      const bookId = elem.getAttribute('data-rating-id')
      const ratingScore = elem.getAttribute('data-rating-score') == 0 ? generateRatings() : elem.getAttribute('data-rating-score') ; 

      console.log(`\nBook ID: ${bookId} \n Rating Score: ${ratingScore}`)

      if(ratingScore > 0 && ratingScore < 1.5){
        elem.innerHTML = "â­";
      }

      if(ratingScore >= 1.5 && ratingScore < 2.0){
        elem.innerHTML = "â­ðŸŒ“";
      }

      if(ratingScore >= 2.0 && ratingScore < 2.5){
        elem.innerHTML = "â­â­";
      }

      if(ratingScore >= 2.5 && ratingScore < 3.0){
        elem.innerHTML = "â­â­ðŸŒ“";
      }

      if(ratingScore >= 3.0 && ratingScore < 3.5){
        elem.innerHTML = "â­â­â­";
      }

       if(ratingScore >= 3.5 && ratingScore < 4.0){
        elem.innerHTML = "â­â­â­ðŸŒ“";
      }

      if(ratingScore >= 4.0 && ratingScore < 4.5){
        elem.innerHTML = "â­â­â­â­";
      }

      if(ratingScore >= 4.5 && ratingScore < 5.0){
        elem.innerHTML = "â­â­â­â­ðŸŒ“";
      }

      
      if(ratingScore == 5){
        elem.innerHTML = "â­â­â­â­â­";
      }

    })
 
   




  }

  
$(document).ready(function () {
 renderRatings();
});


</script>



<!-- 
<% if (data != null) { %>
  <p><%= JSON.stringify(data)%></p>
<% }%>
  
 -->




